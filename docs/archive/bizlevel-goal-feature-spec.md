# –ë–∏–∑–õ–µ–≤–µ–ª: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–∏—á–∏ "–¶–µ–ª—å"

## 1. –û–ë–ó–û–† –§–ò–ß–ò

### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –ø–æ—à–∞–≥–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–∑–Ω–µ—Å-—Ü–µ–ª–∏ —á–µ—Ä–µ–∑ 4 —ç—Ç–∞–ø–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª–∏–∑–∞—Ü–∏–∏ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º 28-–¥–Ω–µ–≤–Ω—ã–º —Ç—Ä–µ–∫–∏–Ω–≥–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞. –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ AI-—Ç—Ä–µ–∫–µ—Ä–æ–º –ú–∞–∫—Å–æ–º, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–º—Å—è –Ω–∞ —Ü–µ–ª–µ–ø–æ–ª–∞–≥–∞–Ω–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.

### 1.2 –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ö—Ä–∏—Å—Ç–∞–ª–ª–∏–∑–∞—Ü–∏—è —Ü–µ–ª–∏**: 4 –≤–µ—Ä—Å–∏–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ (v1-v4)
- **–ü—É—Ç—å –∫ —Ü–µ–ª–∏**: 4 –Ω–µ–¥–µ–ª–∏ –ø–æ 7 –¥–Ω–µ–π —Å —Ç—Ä–µ–∫–∏–Ω–≥–æ–º
- **AI-—Ç—Ä–µ–∫–µ—Ä –ú–∞–∫—Å**: —É–∑–∫–æ—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–æ—Ç –¥–ª—è —Ü–µ–ª–µ–π
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —É—Ä–æ–≤–Ω—è–º–∏**: –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø—Ä–æ–≥—Ä–µ—Å—Å—É –æ–±—É—á–µ–Ω–∏—è

## 2. –†–û–õ–ò –ò –ì–†–ê–ù–ò–¶–´ –ë–û–¢–û–í

### 2.1 –ú–∞–∫—Å - –¢—Ä–µ–∫–µ—Ä —Ü–µ–ª–µ–π

**–û—Å–Ω–æ–≤–Ω–∞—è —Ä–æ–ª—å:**
- –ü–æ–º–æ—â—å –≤ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–º–µ—Ä–∏–º—ã—Ö —Ü–µ–ª–µ–π
- –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∫—É—Ä—Å–∞ —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º —Ü–µ–ª–∏
- –ú–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ú–∞–∫—Å:**
```
‚úÖ –ó–∞–¥–∞–µ—Ç —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ü–µ–ª–∏
‚úÖ –ü–æ–º–æ–≥–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Ü–µ–ª—å –∏–∑–º–µ—Ä–∏–º–æ–π (SMART)
‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–µ–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ —á–µ–∫–∏–Ω–∞—Ö –∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö
‚úÖ –°–≤—è–∑—ã–≤–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —É—Ä–æ–∫–æ–≤ —Å —Ü–µ–ª—å—é
‚úÖ –î–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –Ω–µ–¥–µ–ª–∏
```

**–ß–µ–≥–æ –ù–ï –¥–µ–ª–∞–µ—Ç –ú–∞–∫—Å:**
```
‚ùå –ù–µ –æ–±—Å—É–∂–¥–∞–µ—Ç –±–∏–∑–Ω–µ—Å-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (‚Üí –õ–µ–æ)
‚ùå –ù–µ –æ–±—ä—è—Å–Ω—è–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã —É—Ä–æ–∫–æ–≤ (‚Üí –õ–µ–æ)
‚ùå –ù–µ –¥–∞–µ—Ç —Å–æ–≤–µ—Ç—ã –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ü–µ–ª–∏ (‚Üí –õ–µ–æ)
‚ùå –ù–µ –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç –ø–æ –æ–±—â–∏–º –≤–æ–ø—Ä–æ—Å–∞–º (‚Üí –õ–µ–æ)
```

### 2.2 –ü—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫ –õ–µ–æ

```yaml
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –º–∞—Ç—Ä–∏—Ü—É –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞"
–ú–∞–∫—Å: "–ú–∞—Ç—Ä–∏—Ü–∞ –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–º–æ–∂–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –¥–ª—è –≤–∞—à–µ–π —Ü–µ–ª–∏! –ù–æ –∑–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–º —Ä–∞–∑–±–æ—Ä–æ–º –ª—É—á—à–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –õ–µ–æ - –æ–Ω —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –±–∏–∑–Ω–µ—Å-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º. –Ø –∂–µ –ø–æ–º–æ–≥—É –≤—Å—Ç—Ä–æ–∏—Ç—å —ç—Ç—É –º–∞—Ç—Ä–∏—Ü—É –≤ –≤–∞—à –Ω–µ–¥–µ–ª—å–Ω—ã–π –ø–ª–∞–Ω. –•–æ—Ç–∏—Ç–µ —Å–æ—Å—Ç–∞–≤–∏–º —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é?"

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ö–∞–∫ –º–Ω–µ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏?"
–ú–∞–∫—Å: "–≠—Ç–æ –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –±–∏–∑–Ω–µ—Å–∞! –õ–µ–æ –¥–∞—Å—Ç –≤–∞–º —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º. –Ø –∂–µ –º–æ–≥—É –ø–æ–º–æ—á—å –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∏–∑–º–µ—Ä–∏–º—É—é —Ü–µ–ª—å –ø–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –ø—Ä–æ–¥–∞–∂. –ù–∞–ø—Ä–∏–º–µ—Ä, '—É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é —Å 2% –¥–æ 3% –∑–∞ 30 –¥–Ω–µ–π'. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ–º –≤–∞—à—É —Ü–µ–ª—å –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º?"
```

## 3. –°–¢–†–£–ö–¢–£–†–ê –°–¢–†–ê–ù–ò–¶–´ "–¶–ï–õ–¨"

### 3.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —ç–∫—Ä–∞–Ω–∞

```yaml
–ú–æ–±–∏–ª—å–Ω—ã–π–≠–∫—Ä–∞–Ω_–¶–µ–ª—å:
  header:
    - title: "–¶–µ–ª—å"
    - avatar_user: —Å–ø—Ä–∞–≤–∞
  
  sections:
    1_motivation_card:
      - source: motivational_quotes —Ç–∞–±–ª–∏—Ü–∞
      - update: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø–æ UTC
      - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: —Ü–∏—Ç–∞—Ç–∞ + –∞–≤—Ç–æ—Ä
      
    2_goal_display:
      —Å–æ—Å—Ç–æ—è–Ω–∏–µ_–ê_–∫—Ä–∏—Å—Ç–∞–ª–ª–∏–∑–∞—Ü–∏—è:
        - current_version: "v1" / "v2" / "v3"
        - progress_indicator: "–≠—Ç–∞–ø 2 –∏–∑ 4"
        - next_unlock: "–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø –ø–æ—Å–ª–µ —É—Ä–æ–≤–Ω—è X"
        
      —Å–æ—Å—Ç–æ—è–Ω–∏–µ_–ë_–ø—É—Ç—å:
        - final_goal: —Ç–µ–∫—Å—Ç —Ü–µ–ª–∏ v4
        - progress_circle: XX%
        - current_week: –±–ª–æ–∫ –∞–∫—Ç–∏–≤–Ω–æ–π –Ω–µ–¥–µ–ª–∏
        - timeline: 4 –Ω–µ–¥–µ–ª–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
        
    3_action_buttons:
      - primary_cta: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
      - chat_with_max: –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ
```

## 4. –ö–†–ò–°–¢–ê–õ–õ–ò–ó–ê–¶–ò–Ø –¶–ï–õ–ò: –î–ï–¢–ê–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê

### 4.1 –í–µ—Ä—Å–∏—è 1: "–ù–∞–±—Ä–æ—Å–æ–∫ —Ü–µ–ª–∏" (–∫–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è 1)

```yaml
trigger: 
  - lesson_completed: level_1_last_lesson
  - –ø–æ–∫–∞–∑–∞—Ç—å: goal_v1_form

–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
  —Ç–∏–ø: –ø—Ä–æ—Å—Ç–∞—è_—Ñ–æ—Ä–º–∞
  –ø–æ–ª—è:
    goal_draft:
      label: "–ß—Ç–æ —è —Ö–æ—á—É –¥–æ—Å—Ç–∏—á—å –∑–∞ 30 –¥–Ω–µ–π?"
      type: textarea
      max_length: 200
      required: true
      
    why_now:
      label: "–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –∏–º–µ–Ω–Ω–æ —Å–µ–π—á–∞—Å?"
      type: textarea  
      max_length: 150
      required: true
      
    main_obstacle:
      label: "–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ –Ω–∞ –ø—É—Ç–∏"
      type: text
      max_length: 100
      required: true

—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
  table: core_goals
  data:
    user_id: current_user
    version: 'v1'
    goal_text: goal_draft
    version_data: {
      why_now: why_now,
      main_obstacle: main_obstacle,
      created_at: now()
    }
```

### 4.2 –í–µ—Ä—Å–∏—è 2: "–ú–µ—Ç—Ä–∏–∫–∏" (–ø–æ—Å–ª–µ —É—Ä–æ–≤–Ω—è 4)

```yaml
trigger:
  - checkpoint_after: level_4
  - open_chat: max_goal_v2

chat_flow_max:
  –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ:
    text: "–ü—Ä–∏–≤–µ—Ç, {user_name}! –ü–æ–º–Ω–∏—Ç–µ –≤–∞—à—É —Ü–µ–ª—å? [–ø–æ–∫–∞–∑ v1] –ü–æ—Å–ª–µ —É—Ä–æ–∫–∞ –æ —Ñ–∏–Ω–∞–Ω—Å–∞—Ö –¥–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–∏—Ñ—Ä—ã!"
    chips: ["–î–∞–≤–∞–π—Ç–µ!", "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–µ—Ç—Ä–∏–∫–∏?"]
    
  –≤—ã–±–æ—Ä_–º–µ—Ç—Ä–∏–∫–∏:
    text: "–ö–∞–∫—É—é –º–µ—Ç—Ä–∏–∫—É –±—É–¥–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –¥–ª—è –≤–∞—à–µ–π —Ü–µ–ª–∏?"
    chips: 
      - "üí∞ –í—ã—Ä—É—á–∫–∞/–¥–æ—Ö–æ–¥"
      - "üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤"  
      - "‚è± –í—Ä–µ–º—è –Ω–∞ –∑–∞–¥–∞—á–∏"
      - "üìä –ö–æ–Ω–≤–µ—Ä—Å–∏—è %"
      - "‚úèÔ∏è –î—Ä—É–≥–æ–µ"
      
  –≤–≤–æ–¥_—Ç–µ–∫—É—â–µ–≥–æ:
    text: "–û—Ç–ª–∏—á–Ω–æ! –ö–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ {metric_name} —É –≤–∞—Å —Å–µ–π—á–∞—Å?"
    input: number
    validation: positive_number
    
  –≤–≤–æ–¥_—Ü–µ–ª–µ–≤–æ–≥–æ:
    text: "–ê –∫–∞–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ö–æ—Ç–∏—Ç–µ –¥–æ—Å—Ç–∏—á—å –∑–∞ 30 –¥–Ω–µ–π?"
    input: number
    validation: 
      - positive_number
      - realistic_growth_check
      
  –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:
    text: "–¢–µ–ø–µ—Ä—å –≤–∞—à–∞ —Ü–µ–ª—å –∑–≤—É—á–∏—Ç —Ç–∞–∫: {updated_goal}. –°–æ—Ö—Ä–∞–Ω—è–µ–º?"
    chips: ["‚úÖ –î–∞, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å", "‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å"]

–≤–∞–ª–∏–¥–∞—Ü–∏—è_–º–∞–∫—Å–∞:
  –µ—Å–ª–∏_—Ä–æ—Å—Ç_–±–æ–ª—å—à–µ_200%:
    text: "Wow! –†–æ—Å—Ç –≤ {percent}% –∑–∞ –º–µ—Å—è—Ü - —ç—Ç–æ –æ—á–µ–Ω—å –∞–º–±–∏—Ü–∏–æ–∑–Ω–æ! –£–≤–µ—Ä–µ–Ω—ã? –ú–æ–∂–µ—Ç, –Ω–∞—á–Ω–µ–º —Å 50-70%?"
    chips: ["–ù–µ—Ç, —è —Ä–µ–∞–ª–∏—Å—Ç - 50%", "–î–∞, —è —É–≤–µ—Ä–µ–Ω!"]
    
  –µ—Å–ª–∏_–Ω–µ—Ç_–∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏:
    text: "–ù—É–∂–Ω—ã —Ç–æ—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã. –°–∫–æ–ª—å–∫–æ –∏–º–µ–Ω–Ω–æ {metric_name}?"
    retry: true

—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
  table: core_goals
  data:
    version: 'v2'
    goal_text: goal_with_metrics
    version_data: {
      metric_type: selected_metric,
      current_value: current,
      target_value: target,
      growth_percent: calculated,
      financial_goal: –µ—Å–ª–∏_–ø—Ä–∏–º–µ–Ω–∏–º–æ
    }
```

### 4.3 –í–µ—Ä—Å–∏—è 3: "SMART-–ø–ª–∞–Ω" (–ø–æ—Å–ª–µ —É—Ä–æ–≤–Ω—è 7)

```yaml
trigger:
  - checkpoint_after: level_7
  - open_chat: max_goal_v3

chat_flow_max:
  intro:
    text: "–í—ã –∏–∑—É—á–∏–ª–∏ SMART! –†–∞–∑–æ–±—å–µ–º –≤–∞—à—É —Ü–µ–ª—å [{v2_goal}] –Ω–∞ 4 –Ω–µ–¥–µ–ª–∏"
    
  –¥–ª—è_–∫–∞–∂–¥–æ–π_–Ω–µ–¥–µ–ª–∏:
    week_goal:
      text: "–ù–µ–¥–µ–ª—è {n}: –ö–∞–∫–∞—è –º–∏–Ω–∏-—Ü–µ–ª—å –ø—Ä–∏–±–ª–∏–∑–∏—Ç –≤–∞—Å –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É?"
      chips_suggestions:
        - "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –±–∞–∑—É"
        - "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å"
        - "–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å"
        - "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å"
      input: text_or_chip
      
    week_actions:
      text: "–ö–∞–∫–∏–µ 2-3 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —ç—Ç–æ–≥–æ?"
      input: text
      validation: specific_actions
      
    week_metric:
      text: "–ö–∞–∫–æ–π –±—É–¥–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å {metric_name}?"
      input: number

  smart_check:
    text: "–ü—Ä–æ–≤–µ—Ä–∏–º –ø–æ SMART:
          ‚úì Specific - {check_specific}
          ‚úì Measurable - {check_measurable}  
          ‚úì Achievable - {check_achievable}
          ‚úì Relevant - {check_relevant}
          ‚úì Time-bound - {check_timebound}"
          
–ø—Ä–æ–±–ª–µ–º—ã_–∏_–∫–æ—Ä—Ä–µ–∫—Ü–∏—è:
  —Å–ª–∏—à–∫–æ–º_–æ–±—â–∏–µ_–¥–µ–π—Å—Ç–≤–∏—è:
    text: "'–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏' —Å–ª–∏—à–∫–æ–º –æ–±—â–æ. –ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ? –ú–æ–∂–µ—Ç '10 —Ö–æ–ª–æ–¥–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ –≤ –¥–µ–Ω—å'?"
    
  –ø–µ—Ä–µ–≥—Ä—É–∑_–Ω–µ–¥–µ–ª–∏:
    text: "–ú–Ω–æ–≥–æ –∑–∞–¥–∞—á –Ω–∞ –Ω–µ–¥–µ–ª—é {n}. –í—ã–±–µ—Ä–∏—Ç–µ 2-3 –∫–ª—é—á–µ–≤—ã—Ö, –æ—Å—Ç–∞–ª—å–Ω—ã–µ - –Ω–∞ –ø–æ—Ç–æ–º"
    
  –Ω–µ—Ç_—Å–≤—è–∑–∏_–Ω–µ–¥–µ–ª—å:
    text: "–ù–µ–¥–µ–ª–∏ –Ω–µ —Å–≤—è–∑–∞–Ω—ã. –ö–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–¥–µ–ª–∏ {n} –ø–æ–º–æ–∂–µ—Ç –≤ –Ω–µ–¥–µ–ª–µ {n+1}?"

—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
  table: core_goals
  data:
    version: 'v3'
    goal_text: smart_formulated_goal
    version_data: {
      smart_formula: final_text,
      weekly_plans: [
        {week: 1, goal: text, actions: [], metric_target: number},
        {week: 2, goal: text, actions: [], metric_target: number},
        {week: 3, goal: text, actions: [], metric_target: number},
        {week: 4, goal: text, actions: [], metric_target: number}
      ]
    }
```

### 4.4 –í–µ—Ä—Å–∏—è 4: "–§–∏–Ω–∞–ª—å–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å" (–ø–æ—Å–ª–µ —É—Ä–æ–≤–Ω—è 10)

```yaml
trigger:
  - checkpoint_after: level_10
  - open_chat: max_goal_v4

chat_flow_max:
  celebration:
    text: "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –±–∞–∑–æ–≤–æ–≥–æ –∫—É—Ä—Å–∞! –í–∞—à–∞ —Ü–µ–ª—å: {final_goal_card}"
    
  readiness_check:
    text: "–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã –≥–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å? (1-10)"
    input: slider_1_to_10
    
  –µ—Å–ª–∏_–º–µ–Ω—å—à–µ_7:
    text: "–ß—Ç–æ –≤–∞—Å —Å–º—É—â–∞–µ—Ç?"
    chips: 
      - "–°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–∞—è —Ü–µ–ª—å"
      - "–ú–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏"
      - "–ù–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤"
      - "–ù—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞"
    –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è_–ø–æ–º–æ—â—å: –Ω–∞_–æ—Å–Ω–æ–≤–µ_–≤—ã–±–æ—Ä–∞
    
  commitment:
    text: "–ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ–º –ø—É—Ç—å –∫ —Ü–µ–ª–∏?"
    chips: ["–ó–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º!", "–ß–µ—Ä–µ–∑ 2-3 –¥–Ω—è", "–í –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫"]
    
  final:
    text: "–û—Ç–ª–∏—á–Ω–æ! –°–ª–µ–¥—É—é—â–∏–µ 28 –¥–Ω–µ–π —è –±—É–¥—É —Ä—è–¥–æ–º. –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é - —á–µ–∫–∏–Ω—ã, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å - –ø–æ–¥–¥–µ—Ä–∂–∫–∞!"

—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
  table: core_goals
  data:
    version: 'v4'
    goal_text: final_goal
    version_data: {
      readiness_score: score,
      start_date: selected_date,
      commitment_level: high/medium/low,
      final_formula: text
    }
```

## 5. –ü–£–¢–¨ –ö –¶–ï–õ–ò: –ù–ï–î–ï–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê

### 5.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

```yaml
–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫_—É—Ç—Ä–æ:
  push_notification:
    time: "09:00"
    text: "–ù–æ–≤–∞—è –Ω–µ–¥–µ–ª—è, {name}! –ì–æ—Ç–æ–≤—ã?"
    action: open_week_plan
    
  week_plan_dialog:
    –º–∞–∫—Å: "–ù–µ–¥–µ–ª—è {n}. –í–∞—à–∞ —Ü–µ–ª—å: {week_goal}"
    –ø–æ–∫–∞–∑–∞—Ç—å: —Å–ø–∏—Å–æ–∫_–¥–µ–π—Å—Ç–≤–∏–π_–Ω–µ–¥–µ–ª–∏
    –≤–æ–ø—Ä–æ—Å: "–í—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ –∏–ª–∏ –Ω—É–∂–Ω–æ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å?"
    chips: ["–í—Å–µ –æ–∫!", "–•–æ—á—É –∏–∑–º–µ–Ω–∏—Ç—å"]

—Å—Ä–µ–¥–∞_–ø—É–ª—å—Å:
  push_notification:
    time: "14:00"
    text: "–°–µ—Ä–µ–¥–∏–Ω–∞ –Ω–µ–¥–µ–ª–∏. –ö–∞–∫ –¥–µ–ª–∞?"
    
  mood_check:
    –º–∞–∫—Å: "–ö–∞–∫ –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ —Ü–µ–ª—å—é?"
    emoji_selector: ["üòî", "üòê", "üòä", "üöÄ"]
    
  –µ—Å–ª–∏_–ø–ª–æ—Ö–æ:
    –º–∞–∫—Å: "–ß—Ç–æ –º–µ—à–∞–µ—Ç? –ú–æ–∂–µ—Ç, –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∞—Ç—Ä–∏—Ü—É –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏?"
    chips: ["–ü–æ–∫–∞–∂–∏ –∫–∞–∫", "–°–ø–∞—Å–∏–±–æ, —Å–ø—Ä–∞–≤–ª—é—Å—å"]

–ø—è—Ç–Ω–∏—Ü–∞_–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ:
  push_notification:
    time: "16:00"
    text: "2 –¥–Ω—è –¥–æ —á–µ–∫–∏–Ω–∞. –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å?"

–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ_—á–µ–∫–∏–Ω:
  –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π: true
  time_window: "10:00-22:00"
  –ø–æ–≤—Ç–æ—Ä—ã: 3 —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 3 —á–∞—Å–∞
```

### 5.2 –ù–µ–¥–µ–ª—å–Ω—ã–π —á–µ–∫–∏–Ω —á–µ—Ä–µ–∑ –ú–∞–∫—Å–∞

```yaml
chat_flow_checkin:
  step_1_completion:
    –º–∞–∫—Å: "–ö–∞–∫ –ø—Ä–æ—à–ª–∞ –Ω–µ–¥–µ–ª—è {n}?"
    chips: ["‚úÖ –ü–æ –ø–ª–∞–Ω—É", "‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ", "‚ùå –°–ª–æ–∂–Ω–æ –±—ã–ª–æ"]
    
  step_2_metric:
    –º–∞–∫—Å: "–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ {metric_name}?"
    input: number
    –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π_—Ä–∞—Å—á–µ—Ç: "–≠—Ç–æ {percent}% –æ—Ç –Ω–µ–¥–µ–ª—å–Ω–æ–π —Ü–µ–ª–∏"
    
  step_3_artifacts:
    –º–∞–∫—Å: "–ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑ —É—Ä–æ–∫–æ–≤ –ø—Ä–∏–º–µ–Ω—è–ª–∏?"
    multi_select_chips:
      - "–ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤"
      - "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á–µ—Ç"
      - "SMART-–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"
      - "–¢–µ—Ö–Ω–∏–∫–∏ –∏–∑ —É—Ä–æ–∫–æ–≤"
      - "–ù–µ –ø—Ä–∏–º–µ–Ω—è–ª"
      
  step_4_insight:
    –º–∞–∫—Å: "–ì–ª–∞–≤–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–µ–¥–µ–ª–∏? (–º–æ–∂–Ω–æ –≥–æ–ª–æ—Å–æ–º)"
    input: text_or_voice
    max_length: 100
    
  step_5_feedback:
    –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–æ—Ç–≤–µ—Ç_–Ω–∞_–æ—Å–Ω–æ–≤–µ:
      - –ø—Ä–æ—Ü–µ–Ω—Ç_–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
      - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ_–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
      - —Ç—Ä–µ–Ω–¥_–º–µ—Ç—Ä–∏–∫–∏
      - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ_–Ω–µ–¥–µ–ª–∏
      
    –ø—Ä–∏–º–µ—Ä—ã:
      —É—Å–ø–µ—Ö: "{name}, –æ—Ç–ª–∏—á–Ω–∞—è –Ω–µ–¥–µ–ª—è! +{percent}% –∫ —Ü–µ–ª–∏. –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–º–æ–≥–ª–∞ –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ!"
      —Å—Ä–µ–¥–Ω–µ: "–ù–µ–ø–ª–æ—Ö–æ! –í—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ —Ç–µ—Ö–Ω–∏–∫—É X"
      —Å–ª–æ–∂–Ω–æ: "–ë—ã–≤–∞–µ—Ç! –î–∞–≤–∞–π—Ç–µ —É–ø—Ä–æ—Å—Ç–∏–º –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é. –§–æ–∫—É—Å –Ω–∞ –æ–¥–Ω–æ–º –¥–µ–π—Å—Ç–≤–∏–∏"

—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
  table: weekly_progress
  data:
    week_number: n
    completion_status: full/partial/failed
    metric_value: number
    metric_progress_percent: calculated
    artifacts_used: array
    main_insight: text
    mood_average: calculated_from_daily
    max_feedback: generated_text
```

## 6. –ü–û–í–ï–î–ï–ù–ß–ï–°–ö–ò–ï –ü–ê–¢–¢–ï–†–ù–´ –ú–ê–ö–°–ê

### 6.1 –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

```yaml
—Ö–∞—Ä–∞–∫—Ç–µ—Ä:
  —Ä–æ–ª—å: "–¢—Ä–µ–∫–µ—Ä —Ü–µ–ª–µ–π –∏ –º–æ—Ç–∏–≤–∞—Ç–æ—Ä"
  —Ç–æ–Ω: "–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –Ω–æ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π"
  —Ñ–æ–∫—É—Å: "–í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ —Ü–µ–ª–∏"
  
—Å—Ç–∏–ª—å_–æ–±—â–µ–Ω–∏—è:
  - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç_–∏–º—è: –∫–∞–∂–¥–æ–µ 3-–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - –¥–ª–∏–Ω–∞_—Å–æ–æ–±—â–µ–Ω–∏–π: –º–∞–∫—Å 2-3 —Å—Ç—Ä–æ–∫–∏
  - —ç–º–æ–¥–∑–∏: 1-2 –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ, —É–º–µ—Å—Ç–Ω–æ
  - –ø—Ä–∏–º–µ—Ä—ã: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–≥—Ä–∞–Ω–∏—Ü—ã:
  –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç_–∫_–ª–µ–æ:
    - –æ–±—â–∏–µ_–≤–æ–ø—Ä–æ—Å—ã_–ø–æ_–±–∏–∑–Ω–µ—Å—É
    - –¥–µ—Ç–∞–ª—å–Ω—ã–π_—Ä–∞–∑–±–æ—Ä_—É—Ä–æ–∫–æ–≤
    - —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ_–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
    
  —Ñ–æ–∫—É—Å_–Ω–∞_—Ü–µ–ª–∏:
    - —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
    - –∏–∑–º–µ—Ä–∏–º–æ—Å—Ç—å
    - —Ç—Ä–µ–∫–∏–Ω–≥
    - —Å–≤—è–∑—å_—Å_–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
```

### 6.2 –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

```yaml
–≤–∞–ª–∏–¥–∞—Ü–∏—è_—Ü–µ–ª–µ–π:
  –Ω–µ—Ç_–∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏:
    –ø—Ä–∏–º–µ—Ä: "—Ö–æ—á—É –±–æ–ª—å—à–µ –¥–µ–Ω–µ–≥"
    –º–∞–∫—Å: "–°–∫–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ? –ï—Å–ª–∏ —Å–µ–π—á–∞—Å 500–∫, —Ç–æ —Å–∫–æ–ª—å–∫–æ —Ö–æ—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü?"
    
  –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ:
    –ø—Ä–∏–º–µ—Ä: "10x —Ä–æ—Å—Ç –∑–∞ –Ω–µ–¥–µ–ª—é"
    –º–∞–∫—Å: "–ê–º–±–∏—Ü–∏–æ–∑–Ω–æ! –ù–æ –¥–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å x2? –≠—Ç–æ —É–∂–µ –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!"
    
  –Ω–µ_–±–∏–∑–Ω–µ—Å:
    –ø—Ä–∏–º–µ—Ä: "–ø–æ—Ö—É–¥–µ—Ç—å –Ω–∞ 10–∫–≥"
    –º–∞–∫—Å: "–≠—Ç–æ –≤–∞–∂–Ω–∞—è –ª–∏—á–Ω–∞—è —Ü–µ–ª—å! –ù–æ —è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –±–∏–∑–Ω–µ—Å-—Ü–µ–ª—è—Ö. –ú–æ–∂–µ—Ç, '—Å–Ω–∏–∑–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ —Ä—É—Ç–∏–Ω—É –Ω–∞ 2 —á–∞—Å–∞ –≤ –¥–µ–Ω—å'?"
    
  –∑–∞–≤–∏—Å–∏—Ç_–æ—Ç_–¥—Ä—É–≥–∏—Ö:
    –ø—Ä–∏–º–µ—Ä: "—á—Ç–æ–±—ã –∏–Ω–≤–µ—Å—Ç–æ—Ä –¥–∞–ª –¥–µ–Ω–µ–≥"
    –º–∞–∫—Å: "–≠—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö. –î–∞–≤–∞–π—Ç–µ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ–º —Ç–æ, —á—Ç–æ –≤ –≤–∞—à–µ–π –≤–ª–∞—Å—Ç–∏: '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–∏—Ç—á –∏ –ø–æ–∫–∞–∑–∞—Ç—å 10 –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º'?"

—Å–≤—è–∑—å_—Å_—É—Ä–æ–∫–∞–º–∏:
  –ø—Ä–∏–º–µ—Ä_–≤–æ–ø—Ä–æ—Å–∞: "–ö–∞–∫ –º–∞—Ç—Ä–∏—Ü–∞ –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞ –ø–æ–º–æ–∂–µ—Ç –º–æ–µ–π —Ü–µ–ª–∏?"
  –º–∞–∫—Å: "–ú–∞—Ç—Ä–∏—Ü–∞ –ø–æ–º–æ–∂–µ—Ç –≤—ã–¥–µ–ª–∏—Ç—å 2-3 –∫–ª—é—á–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–¥–µ–ª–∏ –≤–º–µ—Å—Ç–æ 10! –≠—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç —Ñ–æ–∫—É—Å –Ω–∞ –≤–∞—à–µ–π —Ü–µ–ª–∏ [{goal}]. –î–∞–≤–∞–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –æ–ø—Ä–µ–¥–µ–ª–∏–º, –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –≤–∞–∂–Ω—ã–µ –∏ —Å—Ä–æ—á–Ω—ã–µ –¥–ª—è –Ω–µ–¥–µ–ª–∏ {n}?"

–º–æ—Ç–∏–≤–∞—Ü–∏—è_–ø–æ_—Å–∏—Ç—É–∞—Ü–∏–∏:
  –æ—Ç–ª–∏—á–Ω—ã–π_–ø—Ä–æ–≥—Ä–µ—Å—Å:
    - "–í–∞—É, {name}! –£–∂–µ {percent}% –æ—Ç —Ü–µ–ª–∏!"
    - "–í —Ç–∞–∫–æ–º —Ç–µ–º–ø–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç–µ —Ü–µ–ª–∏ –¥–æ—Å—Ä–æ—á–Ω–æ!"
    
  –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π_–ø—Ä–æ–≥—Ä–µ—Å—Å:
    - "–•–æ—Ä–æ—à–∏–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ç–µ–º–ø, {name}"
    - "–í—ã –≤ –≥—Ä–∞—Ñ–∏–∫–µ, –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ!"
    
  –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ:
    - "–î–∞–≤–∞–π—Ç–µ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–ª–∞–Ω"
    - "–ß—Ç–æ –º–µ—à–∞–µ—Ç? –£–±–µ—Ä–µ–º —ç—Ç–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ"
    
  –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ:
    –¥–µ–Ω—å_1: "–ù–µ –∑–∞–±—ã–ª–∏ –ø—Ä–æ —Ü–µ–ª—å?"
    –¥–µ–Ω—å_2: "{name}, –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ?"
    –¥–µ–Ω—å_3: "–î–∞–≤–∞–π—Ç–µ —É–ø—Ä–æ—Å—Ç–∏–º –∑–∞–¥–∞—á—É. –û–¥–Ω–æ –º–∞–ª–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å–µ–≥–æ–¥–Ω—è?"
```

## 7. –¢–ê–ë–õ–ò–¶–´ SUPABASE

### 7.1 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è core_goals

```sql
-- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ core_goals
-- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

ALTER TABLE core_goals 
ADD COLUMN IF NOT EXISTS version_data JSONB;

-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ version_data –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—Å–∏–∏:
-- v1: {
--   why_now: text,
--   main_obstacle: text,
--   created_at: timestamp
-- }
-- v2: {
--   metric_type: text,
--   current_value: numeric,
--   target_value: numeric,
--   growth_percent: numeric,
--   financial_goal: numeric nullable
-- }
-- v3: {
--   smart_formula: text,
--   weekly_plans: [{
--     week: integer,
--     goal: text,
--     actions: text[],
--     metric_target: numeric
--   }]
-- }
-- v4: {
--   readiness_score: integer,
--   start_date: date,
--   commitment_level: text,
--   final_formula: text
-- }
```

### 7.2 –¢–∞–±–ª–∏—Ü–∞ weekly_progress

```sql
CREATE TABLE weekly_progress (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  week_number INTEGER CHECK (week_number BETWEEN 1 AND 4),
  goal_version TEXT DEFAULT 'v4',
  
  -- –ü–ª–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
  planned_actions JSONB,
  completed_actions JSONB,
  completion_status TEXT CHECK (completion_status IN ('full', 'partial', 'failed')),
  
  -- –ú–µ—Ç—Ä–∏–∫–∏
  metric_value NUMERIC,
  metric_progress_percent NUMERIC,
  
  -- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∏–Ω—Å–∞–π—Ç—ã
  artifacts_used TEXT[],
  main_insight TEXT,
  
  -- –¢—Ä–µ–∫–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
  mood_tracking JSONB, -- {mon: 7, tue: 8, wed: 6, ...}
  mood_average NUMERIC,
  
  -- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –ú–∞–∫—Å–∞
  max_feedback TEXT,
  chat_session_id UUID,
  
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW()),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_weekly_progress_user_week ON weekly_progress(user_id, week_number);
```

### 7.3 –¢–∞–±–ª–∏—Ü–∞ daily_mood

```sql
CREATE TABLE daily_mood (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  date DATE,
  mood_score INTEGER CHECK (mood_score BETWEEN 1 AND 10),
  note TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW()),
  
  UNIQUE(user_id, date)
);
```

## 8. –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú–ò –°–ò–°–¢–ï–ú–ê–ú–ò

### 8.1 –°–≤—è–∑—å —Å leo-chat

```yaml
edge_function_modifications:
  leo-chat:
    –¥–æ–±–∞–≤–∏—Ç—å_—Ä–µ–∂–∏–º: 'goal_crystallization'
    
    –ø–∞—Ä–∞–º–µ—Ç—Ä—ã_–¥–ª—è_–º–∞–∫—Å–∞:
      bot_type: 'max'
      allowed_topics:
        - goal_formulation
        - goal_tracking
        - weekly_checkin
        - artifact_application
        
      redirect_triggers:
        - business_strategy -> "–≠—Ç–æ –∫ –õ–µ–æ"
        - lesson_explanation -> "–õ–µ–æ –æ–±—ä—è—Å–Ω–∏—Ç –¥–µ—Ç–∞–ª—å–Ω–æ"
        - general_consulting -> "–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –õ–µ–æ"
        
      system_prompt_additions: |
        –¢—ã –ú–∞–∫—Å - —Ç—Ä–µ–∫–µ—Ä —Ü–µ–ª–µ–π. –¢–≤–æ—è –∑–∞–¥–∞—á–∞:
        1. –ü–æ–º–æ–≥–∞—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ—Ä–∏–º—ã–µ —Ü–µ–ª–∏
        2. –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –Ω–µ–¥–µ–ª—è–º
        3. –°–≤—è–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫—É—Ä—Å–∞ —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º —Ü–µ–ª–∏
        4. –ú–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–µ—Ä–∂–∞—Ç—å —Ñ–æ–∫—É—Å
        –î–ª—è –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è–π –∫ –õ–µ–æ.
```

### 8.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å user_progress

```yaml
checkpoints:
  after_level_1:
    trigger: goal_v1_form
    block_next_until: v1_completed
    
  after_level_4:
    trigger: max_chat_v2
    block_next_until: v2_completed
    
  after_level_7:
    trigger: max_chat_v3
    block_next_until: v3_completed
    
  after_level_10:
    trigger: max_chat_v4
    unlock: weekly_tracking_system
```

## 9. FLUTTER –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 9.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ Goal

```yaml
goal_page.dart:
  imports:
    - goal_crystallization_widget
    - weekly_tracking_widget
    - motivational_quote_widget
    - max_chat_launcher
    
  state_management:
    - riverpod: goalStateProvider
    - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç: crystallization_phase –∏–ª–∏ tracking_phase
    
  layout:
    - SafeArea
    - SingleChildScrollView
    - Column:
      - MotivationalQuoteCard
      - GoalDisplayCard (collapsed/expanded)
      - CurrentPhaseWidget (crystallization –∏–ª–∏ tracking)
      - MaxChatFAB
```

### 9.2 –ß–∞—Ç —Å –ú–∞–∫—Å–æ–º –¥–ª—è —Ü–µ–ª–µ–π

```yaml
max_goal_chat.dart:
  –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
    - chips_widget: –±—ã—Å—Ç—Ä—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
    - number_input_widget: –¥–ª—è –º–µ—Ç—Ä–∏–∫
    - slider_widget: –¥–ª—è –æ—Ü–µ–Ω–æ–∫ 1-10
    - voice_input_button: –¥–ª—è –∏–Ω—Å–∞–π—Ç–æ–≤
    
  flow_controller:
    - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç_—Ç–µ–∫—É—â–∏–π_—ç—Ç–∞–ø: v1/v2/v3/v4/checkin
    - —É–ø—Ä–∞–≤–ª—è–µ—Ç_–¥–∏–∞–ª–æ–≥–æ–º: –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—é
    - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç_–≤_supabase: –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
```

## 10. –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

```yaml
–∫–ª—é—á–µ–≤—ã–µ_–º–µ—Ç—Ä–∏–∫–∏:
  engagement:
    - completion_rate_v1: % –∑–∞–ø–æ–ª–Ω–∏–≤—à–∏—Ö –ø–µ—Ä–≤—É—é –≤–µ—Ä—Å–∏—é
    - completion_rate_v4: % –¥–æ—à–µ–¥—à–∏—Ö –¥–æ —Ñ–∏–Ω–∞–ª–∞
    - weekly_checkin_rate: % –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö —á–µ–∫–∏–Ω—ã
    
  success:
    - goal_achievement_rate: % –¥–æ—Å—Ç–∏–≥—à–∏—Ö >70% —Ü–µ–ª–∏
    - avg_progress_percent: —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
    - artifacts_usage_rate: % –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    
  retention:
    - day_7_retention: –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é
    - day_28_completion: % –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö –ø—É—Ç—å
    - post_28_engagement: –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–æ—Å–ª–µ —Ü–∏–∫–ª–∞
    
  satisfaction:
    - max_usefulness_score: –æ—Ü–µ–Ω–∫–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –ú–∞–∫—Å–∞
    - goal_clarity_improvement: –¥–æ/–ø–æ—Å–ª–µ –ø–æ —è—Å–Ω–æ—Å—Ç–∏ —Ü–µ–ª–∏
```

## 11. PUSH-–£–í–ï–î–û–ú–õ–ï–ù–ò–Ø

```yaml
notifications_schedule:
  –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫:
    - 09:00: "–ù–æ–≤–∞—è –Ω–µ–¥–µ–ª—è! –ü–ª–∞–Ω –≥–æ—Ç–æ–≤?"
    
  —Å—Ä–µ–¥–∞:
    - 14:00: "–°–µ—Ä–µ–¥–∏–Ω–∞ –Ω–µ–¥–µ–ª–∏. –ö–∞–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å?"
    
  –ø—è—Ç–Ω–∏—Ü–∞:
    - 16:00: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —á–µ–∫–∏–Ω—É"
    
  –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ:
    - 10:00: "–í—Ä–µ–º—è –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —á–µ–∫–∏–Ω–∞!"
    - 13:00: –µ—Å–ª–∏_–Ω–µ_–∑–∞–ø–æ–ª–Ω–∏–ª
    - 18:00: –ø–æ—Å–ª–µ–¥–Ω–µ–µ_–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
    
  –µ–∂–µ–¥–Ω–µ–≤–Ω–æ:
    - 20:00: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ "–û—Ü–µ–Ω–∏—Ç–µ –¥–µ–Ω—å 1-10"
```

## 12. –î–ê–õ–¨–ù–ï–ô–®–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø

```yaml
phase_2:
  - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è_—Å_–∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
  - –∫–æ–º–∞–Ω–¥—ã_–∏_—Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è: –≥—Ä—É–ø–ø–æ–≤—ã–µ —Ü–µ–ª–∏
  - ai_insights: –ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  
phase_3:
  - —ç–∫—Å–ø–æ—Ä—Ç_–æ—Ç—á–µ—Ç–æ–≤: PDF —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
  - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è_—Å_crm: –¥–ª—è B2B —Å–µ–≥–º–µ–Ω—Ç–∞
  - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è_–≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è: achievements —Å–∏—Å—Ç–µ–º–∞
```

---

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ Cursor:**

1. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:
   - `/lib/features/goal/` - –≤—Å—è –ª–æ–≥–∏–∫–∞ —Ü–µ–ª–µ–π
   - `/lib/features/chat/max_goal_chat.dart` - —á–∞—Ç —Å –ú–∞–∫—Å–æ–º
   - `/supabase/migrations/` - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î
   - `/supabase/functions/leo-chat/` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º goal

2. –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Supabase:
   - –†–∞—Å—à–∏—Ä–∏—Ç—å core_goals.version_data
   - –°–æ–∑–¥–∞—Ç—å weekly_progress —Ç–∞–±–ª–∏—Ü—É
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å leo-chat –¥–ª—è —Ä–µ–∂–∏–º–∞ –ú–∞–∫—Å–∞

3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
   - –°–Ω–∞—á–∞–ª–∞: v1-v4 —Ñ–æ—Ä–º—ã –≤ —á–µ–∫–ø–æ–∏–Ω—Ç–∞—Ö
   - –ó–∞—Ç–µ–º: —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ú–∞–∫—Å–æ–º
   - –ü–æ—Ç–æ–º: –Ω–µ–¥–µ–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥
   - –í –∫–æ–Ω—Ü–µ: push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è