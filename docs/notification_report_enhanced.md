# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º BizLevel

## 1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–æ –∫–æ–¥—É –∏ —Å—Ç–∞—Ç—É—Å-–¥–æ–∫–∞–º)

### –õ–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (OS-level)
- **–ü–æ–¥–∫–ª—é—á—ë–Ω** `flutter_local_notifications` (^17.2.1). –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.
- **–í `main.dart`** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–∞–π–º–∑–æ–Ω (`timezone`), –∑–∞—Ç–µ–º:
  - `NotificationsService.initialize()` ‚Äî –±–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞; –Ω–∞ iOS –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (`alert/badge/sound`).
  - `NotificationsService.scheduleWeeklyPlan()` ‚Äî –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: –ü–Ω 09:00 (–ø–ª–∞–Ω –Ω–µ–¥–µ–ª–∏), –°—Ä 14:00 (—Å–µ—Ä–µ–¥–∏–Ω–∞ –Ω–µ–¥–µ–ª–∏), –ü—Ç 16:00 (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ), –í—Å 10:00/13:00/18:00 (—á–µ–∫-–∏–Ω).
- **–°–æ–æ–±—â–µ–Ω–∏—è/–∫–∞–Ω–∞–ª—ã**: Android-–∫–∞–Ω–∞–ª `goal_weekly_channel` (importance/priority high).
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–∞–ø–∞** –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—é –Ω–µ –∑–∞–¥–∞–Ω (–Ω–µ—Ç deeplink-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏).

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (UI –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
- –ü–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `SnackBar` (–Ω–∞–≤–∏–≥–∞—Ü–∏—è, –æ—à–∏–±–∫–∏/—É—Å–ø–µ—Ö–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π, –º–∞–≥–∞–∑–∏–Ω GP –∏ –ø—Ä.).
- `NotificationBox` (–∏–∫–æ–Ω–∫–∞ ¬´–∫–æ–ª–æ–∫–æ–ª¬ª —Å –±–µ–π–¥–∂–µ–º) ‚Äî –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ AppBar –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤ (–Ω–µ —Å–≤—è–∑–∞–Ω —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏).

### –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º
- **iOS**: —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ; –ª–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç.
- **Android (<13)**: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç; –∫–∞–Ω–∞–ª —Å–æ–∑–¥–∞—ë—Ç—Å—è.
- **Android (13+)**: —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ `POST_NOTIFICATIONS` –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ü—Ä–æ–±–ª–µ–º—ã¬ª).
- **Web**: –ø–ª–∞–≥–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç; –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ë—Ä–Ω—É—Ç–∞ –≤ `try/catch` ‚Äî –ø–∞–¥–µ–Ω–∏–π –Ω–µ—Ç, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ—Ç (–ø–æ –ø–ª–∞–Ω—É).

## 2. –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ / –ì–¥–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- iOS –ª–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Android –¥–æ –≤–µ—Ä—Å–∏–∏ 13
- UI-`SnackBar`
- –í–∏–∑—É–∞–ª—å–Ω—ã–π `NotificationBox`

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã/—Ä–∏—Å–∫–∏
1. **Android 13+** —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: –Ω–µ—Ç `<uses-permission android:name="android.permission.POST_NOTIFICATIONS"/>` –∏ –Ω–µ—Ç runtime-–∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è ‚áí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è.
2. **–¢–∞–π–º–∑–æ–Ω–∞**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DateTime.now().timeZoneName` –¥–ª—è `tz.getLocation(...)`, —á—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ IANA-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä ‚áí –≤–æ–∑–º–æ–∂–Ω—ã–π —Ñ–æ–ª–±—ç–∫ –Ω–∞ UTC –∏ —Å–¥–≤–∏–≥ –≤—Ä–µ–º–µ–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: –Ω–µ—Ç `RECEIVE_BOOT_COMPLETED` –∏ –ª–æ–≥–∏–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è ‚áí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–æ–≥—É—Ç ¬´—Ç–µ—Ä—è—Ç—å—Å—è¬ª –¥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
4. **–¢–∞–ø –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—é** –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç (–Ω–µ—Ç `onDidReceiveNotificationResponse`) ‚áí –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω (`/goal`, `/goal-checkpoint/:v` –∏ —Ç.–¥.).
5. **Small icon Android**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ic_launcher`, —á—Ç–æ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –∑–∞–ª–∏—Ç—É—é –∫–≤–∞–¥—Ä–∞—Ç–Ω—É—é –∏–∫–æ–Ω–∫—É –≤–º–µ—Å—Ç–æ –º–æ–Ω–æ—Ö—Ä–æ–º–Ω–æ–π status-–∏–∫–æ–Ω–∫–∏.
6. **Remote push (FCM)** –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ MVP ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∑–∞–º—ã—Å–ª—É (–Ω–µ –±–∞–≥).
7. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏** ‚Äî –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±–∏—Ä–∞—Ç—å –≤—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
8. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ CTR –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

### 2.5 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª–∏–∑—É–µ–º–æ—Å—Ç–∏ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã (–ø–æ –∫–æ–¥—É –∏ Supabase)
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `NotificationsService.scheduleWeeklyPlan()` –∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ `main.dart` ‚Äî —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ä–∞–∑–¥–µ–ª–æ–º ¬´–ù–µ–¥–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª —Ü–µ–ª–µ–π¬ª (–Ω—É–∂–Ω—ã –ª–∏—à—å —Ñ–∏–∫—Å—ã Android 13+/—Ç–∞–π–º–∑–æ–Ω—ã/deeplink).
- Deeplink –ø—Ä–∏ —Ç–∞–ø–µ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å `onDidReceiveNotificationResponse` –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ GoRouter (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ç–µ–∫—É—â–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π).
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ ‚Äî –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö weekly‚Äë—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å `RECEIVE_BOOT_COMPLETED` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ OS‚Äë—Å—Ü–µ–Ω–∞—Ä–∏–∏ ¬´—á–∞—Ç‚Äë–æ—Ç–≤–µ—Ç¬ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å —á–∏—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π (–±–µ–∑ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á) ‚Äî –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è FCM –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø—É—à; –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –±—É–¥—É—â–∏–π —ç—Ç–∞–ø (M2).
- –¢–æ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:
  - GP: `GpService`, `gpBalanceProvider` (Hive+SWR) ‚Äî –º–æ–∂–Ω–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –±–∞–Ω–Ω–µ—Ä ¬´–Ω–∏–∑–∫–∏–π –±–∞–ª–∞–Ω—Å¬ª, —É—Å–ø–µ—Ö/–æ—à–∏–±–∫—É –ø–æ–∫—É–ø–æ–∫/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
  - –¶–µ–ª–∏: `GoalsRepository` (`upsertGoalField`, `upsertWeek/updateWeek`), –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã `goalLatest/goalVersions/goalProgressProvider` ‚Äî –º–æ–∂–Ω–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –±–∞–Ω–Ω–µ—Ä—ã ¬´—à–∞–≥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω¬ª, ¬´–≤–µ—Ä—Å–∏—è –≥–æ—Ç–æ–≤–∞/—á—Ç–æ –¥–∞–ª—å—à–µ¬ª.
  - –ë–∞—à–Ω—è: `tower_tiles.dart` (`_unlockFloor`, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫/—É—Å–ø–µ—Ö–∞) ‚Äî –±–∞–Ω–Ω–µ—Ä—ã ¬´—ç—Ç–∞–∂ –æ—Ç–∫—Ä—ã—Ç¬ª/–æ—à–∏–±–∫–∏.
  - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `LibraryRepository` + –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã ‚Äî –±–∞–Ω–Ω–µ—Ä –æ –Ω–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞.
- Supabase: –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏ –¥–ª—è push —Å–µ–π—á–∞—Å –Ω–µ—Ç ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ—Ç; –≤—Å—ë, —á—Ç–æ –æ—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ FCM/—Å–µ—Ä–≤–µ—Ä, –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ –±—É–¥—É—â–∏–µ —ç—Ç–∞–ø—ã.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫–æ–¥—É –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:
- –ù–∞–≤–∏–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `AppShell` (PageView) —Ç—Ä–µ–±—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–æ—É—Ç–µ—Ä—É (–∏–ª–∏ `navigatorKey`), —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å deeplink –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–∏–¥–∂–µ—Ç–∞; —Ç–∞–∫–∂–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–± –ø–µ—Ä–µ–¥ `go()` –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç.
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ ID (1001/1002/1003/11xx) ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ ID). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö ID –∏–ª–∏ —è–≤–Ω–æ –æ—Ç–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ ¬´—Å–≤–æ–∏¬ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ‚Äë–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
- `NotificationBox` ‚Äî —á–∏—Å—Ç–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ –Ω–µ —Å–≤—è–∑–∞–Ω —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏; —Ü–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (M1).

## 3. –°—Ç—Ä–∞—Ç–µ–≥–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ø—Ä–æ–¥—É–∫—Ç + –º–∞—Ä–∫–µ—Ç–∏–Ω–≥)

### 3.1 –í–Ω–µ—à–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (OS-level push)

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Retention & Engagement

**–ù–µ–¥–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª —Ü–µ–ª–µ–π** (—É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è):
- **–ü–Ω 9:00** ‚Üí "üéØ –ù–æ–≤–∞—è –Ω–µ–¥–µ–ª—è! {Name}, –∫–∞–∫–æ–π –≥–ª–∞–≤–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ?"
- **–°—Ä 14:00** ‚Üí "‚ö° –°–µ—Ä–µ–¥–∏–Ω–∞ –Ω–µ–¥–µ–ª–∏. –¢—ã –ø—Ä–æ—à–µ–ª {N}% –ø—É—Ç–∏ –∫ —Ü–µ–ª–∏"
- **–ü—Ç 16:00** ‚Üí "üìä –í—ã—Ö–æ–¥–Ω—ã–µ –±–ª–∏–∑–∫–æ! –°–∞–º–æ–µ –≤—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —á–µ–∫–∏–Ω—É"
- **–í—Å 18:00** ‚Üí "‚úçÔ∏è {Name}, –∑–∞–ø–æ–ª–Ω–∏ –∏—Ç–æ–≥–∏ –Ω–µ–¥–µ–ª–∏ –∑–∞ 5 –º–∏–Ω—É—Ç"

**–ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—à–Ω–∏** (–Ω–æ–≤–æ–µ):
- –ü–æ—Å–ª–µ 24—á –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: "üèóÔ∏è –¢–≤–æ–∏ —Ü–µ–ª–∏ –∂–¥—É—Ç! –£—Ä–æ–≤–µ–Ω—å {N} –ø–æ—á—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω"
- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç—Ç–∞–∂–∞: "üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –≠—Ç–∞–∂ {N} –æ—Ç–∫—Ä—ã—Ç. –ù–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ –∂–¥—É—Ç!"
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∏–Ω–∏-–∫–µ–π—Å–∞: "üíº –ö–µ–π—Å –∑–∞–≤–µ—Ä—à–µ–Ω! –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"

**GP-—ç–∫–æ–Ω–æ–º–∏–∫–∞** (–∫—Ä–∏—Ç–∏—á–Ω–æ):
- –ë–∞–ª–∞–Ω—Å < 10 GP: "‚ö†Ô∏è –û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ GP –¥–ª—è —á–∞—Ç–∞ —Å —Ç—Ä–µ–Ω–µ—Ä–æ–º"
- –ë–∞–ª–∞–Ω—Å = 0: "üî¥ GP –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å. –ü–æ–ø–æ–ª–Ω–∏ –±–∞–ª–∞–Ω—Å –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è"
- –ë–æ–Ω—É—Å –¥–æ—Å—Ç—É–ø–µ–Ω: "üéÅ +50 GP –∑–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã!"
- –ü–æ–∫—É–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞: "‚úÖ +{N} GP —É—Å–ø–µ—à–Ω–æ –Ω–∞—á–∏—Å–ª–µ–Ω—ã"

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Education & Motivation

**–ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ** (1 —Ä–∞–∑ –≤ –¥–µ–Ω—å, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è):
- –£—Ç—Ä–µ–Ω–Ω–∏–µ (7-9): –¶–∏—Ç–∞—Ç—ã –∏–∑ `motivational_quotes` + "–ù–∞—á–Ω–∏ –¥–µ–Ω—å —Å —É—Ä–æ–∫–∞"
- –í–µ—á–µ—Ä–Ω–∏–µ (19-21): "–ó–∞–≤–µ—Ä—à–∏–ª –ª–∏ —Ç—ã {daily_action} —Å–µ–≥–æ–¥–Ω—è?"

**–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ**:
- –ù–æ–≤—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç: "üìÑ –®–∞–±–ª–æ–Ω {artifact_name} –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é"
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–≤–∏–∑–∞: "üß† –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –ù–∞–≤—ã–∫ {skill} +1"
- –ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–µ–Ω: "üéì –£—Ä–æ–≤–µ–Ω—å {N}: {title} –∂–¥–µ—Ç —Ç–µ–±—è"


### 3.2 –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (in-app)

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**Toast/Banner —Å–∏—Å—Ç–µ–º–∞**:
```
- –£—Å–ø–µ—Ö: –ó–µ–ª–µ–Ω—ã–π –±–∞–Ω–Ω–µ—Ä —Å–≤–µ—Ä—Ö—É —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π slideDown + fadeIn
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –°–∏–Ω–∏–π –±–∞–Ω–Ω–µ—Ä —Å –∏–∫–æ–Ω–∫–æ–π ‚ÑπÔ∏è
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –û—Ä–∞–Ω–∂–µ–≤—ã–π —Å –ª–µ–≥–∫–æ–π –≤–∏–±—Ä–∞—Ü–∏–µ–π
- –û—à–∏–±–∫–∞: –ö—Ä–∞—Å–Ω—ã–π —Å–æ –∑–≤—É–∫–æ–º alert.mp3
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è in-app**:

**–ë–∞—à–Ω—è BizLevel**:
- "üéØ –í–µ—Ä—Å–∏—è —Ü–µ–ª–∏ v{N} —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞" + CTA "–ü–µ—Ä–µ–π—Ç–∏ –∫ –±–∞—à–Ω–µ"
- "üèÜ –£—Ä–æ–≤–µ–Ω—å {N} –∑–∞–≤–µ—Ä—à–µ–Ω! –ù–∞–≤—ã–∫ {skill} +1"
- "üîì –ß–µ–∫–ø–æ–∏–Ω—Ç —Ü–µ–ª–∏ v{N} –¥–æ—Å—Ç—É–ø–µ–Ω" + CTA "–ù–∞—á–∞—Ç—å"
- "‚ö†Ô∏è –ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å {N-1} –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è"

**–£—Ä–æ–≤–Ω–∏ –∏ –æ–±—É—á–µ–Ω–∏–µ**:
- "üìπ –í–∏–¥–µ–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ ‚Äî –≤–∫–ª—é—á–µ–Ω —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ä–µ–∂–∏–º"
- "üíæ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç {name} —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∑–∞–≥—Ä—É–∑–∫–∏"
- "üìö –ù–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É"

**GP –∏ –º–∞–≥–∞–∑–∏–Ω**:
- "üíé +{N} GP –Ω–∞—á–∏—Å–ª–µ–Ω–æ –Ω–∞ –±–∞–ª–∞–Ω—Å"
- "‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ GP. –ë–∞–ª–∞–Ω—Å: {current}, —Ç—Ä–µ–±—É–µ—Ç—Å—è: {needed}"
- "üõí –ü–æ–∫—É–ø–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è..."
- "‚úÖ –≠—Ç–∞–∂ {N} —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"

#### –¶–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- –ò–∫–æ–Ω–∫–∞ –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∞ –≤ AppBar —Å —Å—á–µ—Ç—á–∏–∫–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 20 —Å–æ–±—ã—Ç–∏–π —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–Ω—è–º
- –§–∏–ª—å—Ç—Ä—ã: –í—Å–µ / –¶–µ–ª–∏ / GP / –û–±—É—á–µ–Ω–∏–µ / –ß–∞—Ç—ã
- –°–≤–∞–π–ø –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è, —Ç–∞–ø –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ >20 —Å–æ–±—ã—Ç–∏–π

### 3.3 –£—Å–ª–æ–≤–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è (binding –∫ —Å–æ–±—ã—Ç–∏—è–º –≤ –∫–æ–¥–µ –∏ –ë–î)

#### In-app –±–∞–Ω–Ω–µ—Ä—ã (–≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ, –Ω–µ–±–æ–ª—å—à–∞—è –∞–Ω–∏–º–∞—Ü–∏—è)
- –ë–∞—à–Ω—è / —ç—Ç–∞–∂–∏:
  - "‚úÖ –≠—Ç–∞–∂ {N} —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" ‚Äî –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ `GpService.unlockFloor(...)` (—Å–º. `tower_tiles.dart` ‚Üí `_unlockFloor` –≤–µ—Ç–∫–∞ —É—Å–ø–µ—Ö–∞).
  - "‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ GP" ‚Äî –∫–æ–≥–¥–∞ `GpService.unlockFloor` –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É `gp_insufficient` –∏–ª–∏ `gpBalanceProvider.value < threshold` –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–∏–∞–ª–æ–≥–∞.
  - "‚ö†Ô∏è –ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å" ‚Äî –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–∫—Ä—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É–∑–µ–ª (–µ—Å—Ç—å Snackbar; –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –±–∞–Ω–Ω–µ—Ä) ‚Äî `tower_tiles.dart` ‚Üí `_handleLevelTap/_handleCheckpointTap`.

- –¶–µ–ª—å / —á–µ–∫–ø–æ–∏–Ω—Ç—ã:
  - "‚úî –®–∞–≥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –û—Ç–∫—Ä—ã–ª–æ—Å—å —Å–ª–µ–¥—É—é—â–µ–µ –ø–æ–ª–µ" ‚Äî —É—Å–ø–µ—à–Ω—ã–π `GoalsRepository.upsertGoalField` (—É–∂–µ –µ—Å—Ç—å Snackbar –≤ `GoalCheckpointScreen`; –∑–∞–º–µ–Ω—è–µ–º –Ω–∞ –±–∞–Ω–Ω–µ—Ä).
  - "üéØ –í–µ—Ä—Å–∏—è v{N} —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞" ‚Äî —É—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ (–≤ `GoalVersionForm`/`GoalCheckpointScreen`).
  - "üí° –ß—Ç–æ –¥–∞–ª—å—à–µ" ‚Äî –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `hasGoalVersionProvider(version-1)=true` –∏ `hasGoalVersionProvider(version)=false` –Ω–∞ —ç–∫—Ä–∞–Ω–µ `/goal`.

- –ù–µ–¥–µ–ª—å–Ω—ã–π —á–µ–∫-–∏–Ω:
  - "üìà –ò—Ç–æ–≥–∏ –Ω–µ–¥–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã" ‚Äî —É—Å–ø–µ—à–Ω—ã–π `GoalsRepository.updateWeek/upsertWeek` (–∑–∞–º–µ–Ω—è–µ–º Snackbar –Ω–∞ –±–∞–Ω–Ω–µ—Ä –Ω–∞ `GoalScreen`).
  - "‚ÑπÔ∏è –£–∫–∞–∂–∏—Ç–µ –º–µ—Ç—Ä–∏–∫—É/—á–∏—Å–ª–æ" ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º (—É–∂–µ –µ—Å—Ç—å Snackbar; –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –±–∞–Ω–Ω–µ—Ä).

- –ß–∞—Ç—ã (–õ–µ–æ/–ú–∞–∫—Å):
  - "üí¨ –ù–æ–≤—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –ú–∞–∫—Å–∞/–õ–µ–æ" ‚Äî –∫–æ–≥–¥–∞ –ø—Ä–∏—à—ë–ª –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∞ —Ç–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ shell ‚â† `/chat` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–±–∞ –≤ `AppShell`). –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è ‚Äî –∫–æ–ª–ª–±–µ–∫ –≤ `LeoDialogScreen`/`LeoService` –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è.

- GP –∏ –ø–æ–∫—É–ø–∫–∏:
  - "+{N} GP –Ω–∞—á–∏—Å–ª–µ–Ω–æ" ‚Äî —É—Å–ø–µ—à–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–∫—É–ø–∫–∏ (`GpService.verifyPurchase`) –Ω–∞ `GpStoreScreen`.
  - "üõí –ü–æ–∫—É–ø–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è..." ‚Üí "‚úÖ –ü–æ–∫—É–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞/–û—à–∏–±–∫–∞" ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ init‚Üíverify –≤ `GpStoreScreen`.

- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:
  - "üìö –ù–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ" ‚Äî –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ `LibraryRepository` (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ timestamp/–∫–æ–ª–∏—á–µ—Å—Ç–≤–∞; –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ —Å—É—Ç–∫–∏).

–£—Å–ª–æ–≤–∏—è –ø–æ–∫–∞–∑–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤:
- –ù–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞; –∞–≤—Ç–æ–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3‚Äì5 —Å–µ–∫—É–Ω–¥; —Å—Ç–µ–∫ –Ω–µ –±–æ–ª–µ–µ 2 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ –∫–ª—é—á—É —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `goal_step_saved` —Å —Ç–∞–π–º–∞—É—Ç–æ–º 5 –º–∏–Ω—É—Ç).

#### OS‚Äëlevel (–ª–æ–∫–∞–ª—å–Ω—ã–µ/FCM)
- –ù–µ–¥–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª —Ü–µ–ª–µ–π (–ª–æ–∫–∞–ª—å–Ω—ã–µ):
  - –ü–Ω 09:00, –°—Ä 14:00, –ü—Ç 16:00, –í—Å 10/13/18 ‚Äî –∫–∞–∫ –≤ `NotificationsService.scheduleWeeklyPlan()`; —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ IANA —Ç–∞–π–º–∑–æ–Ω—É.
- –ë–∞–ª–∞–Ω—Å GP –Ω–∏–∑–∫–∏–π (–ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–ª–∏ FCM):
  - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `gpBalanceProvider` ‚Üí –µ—Å–ª–∏ `balance < threshold` –∏ –ø—Ä–æ—à–ª–æ ‚â•24—á —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç—Ç–∞–∂–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–µ):
  - –°—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ `unlockFloor` (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ), —Å deeplink –≤ `/tower`.
- –ß–∞—Ç‚Äë–æ—Ç–≤–µ—Ç (FCM, –±—É–¥—É—â–∏–π —ç—Ç–∞–ø):
  - –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏ –Ω–æ–≤–æ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—Å–∫–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏; –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—à–∞ —Å deeplink `/chat?sessionId=...` —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ñ–æ–Ω–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å opt‚Äëin.
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–∞–π–¥–∂–µ—Å—Ç (FCM):
  - –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ > N –∑–∞ –ø–µ—Ä–∏–æ–¥; deeplink `/library`.

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 4.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π

```dart
// –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Supabase Remote Config
class NotificationConfig {
  // –®–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  Map<String, NotificationTemplate> templates;
  
  // –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  Map<String, TimeSlot> defaultSchedule;
  
  // Feature flags –¥–ª—è A/B —Ç–µ—Å—Ç–æ–≤
  Map<String, bool> featureFlags;
  
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Hive)
  UserNotificationPreferences userPrefs;
}

class NotificationTemplate {
  String id;
  String titleTemplate; // {name}, {progress}, {level}
  String bodyTemplate;
  String? soundFile;
  bool vibrate;
  int priority;
  String? imageUrl;
  Map<String, dynamic> deepLinkPayload;
  Map<String, String> localizations; // ru, en, kz
}
```

### 4.2 Rules Engine

```dart
abstract class NotificationRule {
  bool shouldTrigger(UserContext context);
  NotificationPayload build(UserContext context);
  DateTime? nextTriggerTime();
  int priority; // –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
}

// –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª
class InactivityRule extends NotificationRule {
  final Duration threshold = Duration(hours: 24);
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
}

class LowBalanceRule extends NotificationRule {
  final int threshold = 10;
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ GP
}

class StreakRule extends NotificationRule {
  final int minStreak = 3;
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–∏–∏ –¥–Ω–µ–π
}

class GoalProgressRule extends NotificationRule {
  final double minProgress = 0.5;
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–µ–¥–µ–ª–∏
}
```

### 4.3 –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

```dart
class NotificationPersonalizer {
  // A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  String getVariant(String testId, String userId) {
    // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–≥–æ—Ä—Ç–∞–º
  }
  
  // –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
  DateTime getBestTimeToSend(String userId, String type) {
    // –ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –£—á–µ—Ç —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
    // DND —Ä–µ–∂–∏–º (22:00-8:00)
  }
  
  // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
  String personalizeMessage(String template, UserData data) {
    // –ó–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
    // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    // –≠–º–æ–¥–∑–∏ based on user preferences
  }
  
  // –ë–∞—Ç—á–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  List<Notification> batchNotifications(List<Notification> pending) {
    // –ú–∞–∫—Å–∏–º—É–º 3 –≤ –¥–µ–Ω—å
    // –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
    // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö
  }
}
```

## 5. –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∏ UX

### 5.1 iOS (–Ω–∞—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å)

- **–ó–≤—É–∫–∏**:
  - Custom –∑–≤—É–∫ `goal_achieved.caf` –¥–ª—è –≤–∞–∂–Ω—ã—Ö (—Ü–µ–ª—å, GP)
  - –°–∏—Å—Ç–µ–º–Ω—ã–π `default` –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö
  - –ë–µ–∑ –∑–≤—É–∫–∞ –¥–ª—è low-priority
- **–í–∏–±—Ä–∞—Ü–∏—è**: —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–±–∞–ª–∞–Ω—Å < 5 GP, –¥–µ–¥–ª–∞–π–Ω —Ü–µ–ª–∏)
- **Badge**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ–¥–µ–ª–∏
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞**: –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —á–µ—Ä–µ–∑ Notification Groups
- **Rich notifications**: —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### 5.2 Android

**–ö–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:
```xml
- goal_critical: MAX importance, –∑–≤—É–∫ + –≤–∏–±—Ä–∞—Ü–∏—è + heads-up
- goal_reminder: HIGH importance, –∑–≤—É–∫ –±–µ–∑ –≤–∏–±—Ä–∞—Ü–∏–∏
- education: DEFAULT importance, —Ç–∏—Ö–∏–µ
- gp_economy: HIGH importance, custom –∑–≤—É–∫ coin.mp3
- chat_messages: HIGH importance, –∑–≤—É–∫ message.mp3
```

**–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
- **Small icon**: –º–æ–Ω–æ—Ö—Ä–æ–º–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –±–∞—à–Ω–∏ `ic_stat_tower`
- **Large icon**: –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –∏–∫–æ–Ω–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **Accent color**: `#4B6BFB` (AppColor.primary)
- **–°—Ç–∏–ª–∏**: BigTextStyle –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö, InboxStyle –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- **Actions**: "–û—Ç–∫—Ä—ã—Ç—å", "–û—Ç–ª–æ–∂–∏—Ç—å", "–û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º"

### 5.3 In-App –∞–Ω–∏–º–∞—Ü–∏–∏

```dart
// –ü–æ—è–≤–ª–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞
AnimatedContainer(
  duration: Duration(milliseconds: 300),
  curve: Curves.easeOutBack,
  transform: Matrix4.translationValues(0, offset, 0),
  child: NotificationBanner(),
)

// Haptic feedback
HapticFeedback.lightImpact(); // iOS success
HapticFeedback.mediumImpact(); // iOS warning
Vibration.vibrate(duration: 50); // Android all

// –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
AudioPlayer.play('sounds/success.mp3'); // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
AudioPlayer.play('sounds/coin.mp3'); // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ GP
AudioPlayer.play('sounds/notification.mp3'); // –û–±—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

## 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### 6.1 M0 ‚Äî –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)

1. **Android 13+ permissions**:
   ```xml
   <!-- AndroidManifest.xml -->
   <uses-permission android:name="android.permission.POST_NOTIFICATIONS"/>
   ```
   ```dart
   // Runtime request (—á–µ—Ä–µ–∑ API –ø–ª–∞–≥–∏–Ω–∞, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
   final androidPlugin = FlutterLocalNotificationsPlugin()
     .resolvePlatformSpecificImplementation<AndroidFlutterLocalNotificationsPlugin>();
   await androidPlugin?.requestNotificationsPermission();
   ```

2. **–¢–∞–π–º–∑–æ–Ω—ã**:
   ```dart
   // –î–æ–±–∞–≤–∏—Ç—å flutter_native_timezone
   final String timeZoneName = await FlutterNativeTimezone.getLocalTimezone();
   tz.setLocalLocation(tz.getLocation(timeZoneName));
   ```

3. **DeepLink –Ω–∞–≤–∏–≥–∞—Ü–∏—è**:
   ```dart
   // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º —Ç–∞–ø–∞ (–±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è BuildContext)
   await _plugin.initialize(
     initSettings,
     onDidReceiveNotificationResponse: (details) {
       final payload = details.payload;
       if (payload == null) return;
       final data = json.decode(payload);
       // –í—ã–∑–æ–≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞/–Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
       AppRouter.instance.go(data['route']); // –Ω–∞–ø—Ä–∏–º–µ—Ä: "/goal", "/tower"
     },
   );
   // –ü—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–æ–±–∞–≤–ª—è—Ç—å payload —Å –º–∞—Ä—à—Ä—É—Ç–æ–º
   await _plugin.zonedSchedule(
     1001,
     '‚Ä¶',
     '‚Ä¶',
     when,
     details,
     payload: json.encode({ 'route': '/goal' }),
     uiLocalNotificationDateInterpretation: UILocalNotificationDateInterpretation.absoluteTime,
     matchDateTimeComponents: DateTimeComponents.dayOfWeekAndTime,
     androidAllowWhileIdle: true,
   );
   ```

4. **Small icon Android**:
   ```bash
   # –°–æ–∑–¥–∞—Ç—å –º–æ–Ω–æ—Ö—Ä–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É
   res/drawable/ic_stat_tower.xml
   res/drawable-hdpi/ic_stat_tower.png
   res/drawable-xhdpi/ic_stat_tower.png
   ```

5. **Boot receiver** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   ```xml
   <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
   <receiver android:name=".BootReceiver">
     <intent-filter>
       <action android:name="android.intent.action.BOOT_COMPLETED"/>
     </intent-filter>
   </receiver>
   ```

6. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∫–∞–∫ —Å–µ–π—á–∞—Å) –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ ‚Äî –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ –ø–æ—è–≤—è—Ç—Å—è.
   - –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –ø–µ—Ä–µ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—Ç–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ ID.

### 6.2 M1 ‚Äî –£–ª—É—á—à–µ–Ω–∏—è –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ö–∞–Ω–∞–ª—ã/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ (ru/en/kz)
- –¶–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- A11y: Semantics, min hit-targets ‚â•44px
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**Smart Scheduling**:
- –ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- DND —Ä–µ–∂–∏–º (22:00-8:00)
- –ë–∞—Ç—á–∏–Ω–≥ (–º–∞–∫—Å–∏–º—É–º 3 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –¥–µ–Ω—å)
- –£—á–µ—Ç —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤

**Gamification**:
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è ("üèÜ –ü–µ—Ä–≤—ã–π —ç—Ç–∞–∂ –ø—Ä–æ–π–¥–µ–Ω!")

### 6.3 M2 ‚Äî FCM –∏ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ (4-6 –Ω–µ–¥–µ–ª—å)

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ `firebase_messaging`
- –°–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Supabase Edge Functions
- Token management –∏ segmentation
- Silent push –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
- Triggered campaigns –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ML
- Cross-device —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- Rich media (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ –ø—Ä–µ–≤—å—é)

## 7. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ –∏ KPI

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **CTR —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** > 15% (—Ü–µ–ª—å: 20%)
- **Opt-out rate** < 5% (—Ü–µ–ª—å: 3%)
- **DAU —É–≤–µ–ª–∏—á–µ–Ω–∏–µ** –Ω–∞ 20% –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- **Retention D7** —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞ 15%
- **Session length** —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞ 10%

### –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **–ù–µ–¥–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏**: completion rate +25%
- **GP-—ç–∫–æ–Ω–æ–º–∏–∫–∞**: –∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫—É +30%
- **–ë–∞—à–Ω—è**: –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–≤–Ω—è–º +20%
- **–ß–∞—Ç—ã**: —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π +15%

### A/B —Ç–µ—Å—Ç—ã
1. **–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏**: —É—Ç—Ä–æ (7-9) vs –¥–µ–Ω—å (12-14) vs –≤–µ—á–µ—Ä (18-21)
2. **–¢–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏–π**: —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π vs –¥—Ä—É–∂–µ—Å–∫–∏–π vs –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π
3. **–≠–º–æ–¥–∑–∏**: —Å —ç–º–æ–¥–∑–∏ vs –±–µ–∑ —ç–º–æ–¥–∑–∏
4. **–ß–∞—Å—Ç–æ—Ç–∞**: 1 vs 3 vs 5 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å
5. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: {name} vs –±–µ–∑ –∏–º–µ–Ω–∏
6. **Urgency**: —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ vs –±–µ–∑

## 8. –¢–µ—Å—Ç-—á–µ–∫–ª–∏—Å—Ç

### –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] iOS: –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ ‚Üí –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è
- [ ] Android 13+: –∑–∞–ø—Ä–æ—Å POST_NOTIFICATIONS —á–µ—Ä–µ–∑ API –ø–ª–∞–≥–∏–Ω–∞ ‚Üí —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ grant; –æ—Ç–∫–∞–∑ ‚Äî –±–µ–∑ –∫—Ä—ç—à–µ–π
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- [ ] Web: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞–¥–µ–Ω–∏–π
- [ ] –¢–∞–π–º–∑–æ–Ω—ã: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (—Ç–µ—Å—Ç 3+ –ø–æ—è—Å–æ–≤)

### Deeplinks –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- [ ] –¢–∞–ø –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—é ‚Üí –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω (–≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
- [ ] Payload –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏–∑ —Ñ–æ–Ω–∞/—É–±–∏—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –ü—Ä–∏ AppShell/PageView –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
- [ ] –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–∞—Ö –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã

### UX –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- [ ] –ë–∞–Ω–Ω–µ—Ä—ã —á–∏—Ç–∞–µ–º—ã screen reader
- [ ] Hit targets ‚â• 44px
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ (<16ms frame time)
- [ ] –ó–≤—É–∫–∏/–≤–∏–±—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–∞ Android –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–æ–Ω–æ—Ö—Ä–æ–º–Ω–∞—è small‚Äëicon `ic_stat_tower` –≤ —Å—Ç–∞—Ç—É—Å‚Äë–±–∞—Ä–µ

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- [ ] DND —Ä–µ–∂–∏–º —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è
- [ ] –ë–∞—Ç—á–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç (‚â§3 –≤ –¥–µ–Ω—å)
- [ ] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

## 9. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|------------|---------|-----------|
| –°–ø–∞–º-–∂–∞–ª–æ–±—ã | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –°—Ç—Ä–æ–≥–∏–π –±–∞—Ç—á–∏–Ω–≥, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Å—Ç–æ—Ç—ã |
| –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–±–æ–∏ | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | Graceful degradation, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| –ù–∏–∑–∫–∏–π CTR | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | A/B —Ç–µ—Å—Ç—ã, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è |
| Battery drain | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, exact ‚Üí inexact alarms |
| Privacy concerns | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, —è–≤–Ω—ã–π opt-in |

## 10. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π BizLevel —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞: –æ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî –±—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (M0) –¥–ª—è Android 13+ –∏ deeplinks, –∑–∞—Ç–µ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é –∏ –≤–æ–≤–ª–µ—á–µ–Ω–∏–µ.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- **–¶–µ–Ω–Ω–æ—Å—Ç—å > –ß–∞—Å—Ç–æ—Ç–∞**: –∫–∞–∂–¥–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: —É—á–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ò–∑–º–µ—Ä–∏–º–æ—Å—Ç—å**: –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è based on data
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ —Ä–µ–ª–∏–∑–∞

–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å—Ç–∞–Ω–µ—Ç –º–æ—â–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º retention –∏ engagement, —É–≤–µ–ª–∏—á–∏–≤–∞—è –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–∞ 15-30%.