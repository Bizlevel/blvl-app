# Этап 23: Мелкие UI-фиксы и полировка (Web + Mobile)

### Задача 23.1: Экран логина и регистрации
- **Файлы:** `lib/screens/auth/login_screen.dart`, `lib/screens/auth/register_screen.dart`, `assets/images/logo_light.png`
- **Что делать:**
  1. Увеличить логотип до 96 px и поместить его в белый `Container` с радиусом 24 px.
  2. Сделать поле пароля скрытым (`obscureText`) и добавить кнопку-глаз для показа/скрытия.
  3. Обновить `RegisterScreen`, приведя макет к стилю `LoginScreen` (общий `AuthForm`).
  4. Обновить тест `login_screen_test.dart` и добавить аналогичный для регистрации.
- **Проверка:** визуальное совпадение макетов, тесты входа/регистрации зелёные.

### Задача 23.2: Карточка уровня (`LevelCard`)
- **Файл:** `lib/widgets/level_card.dart`
- **Что делать:**
  1. Убрать внутренний голубой фон, оставить только полупрозрачную серую окантовку.
  2. Замковый оверлей заблокированного уровня должен заполнять всю карточку.
  3. Отображать текст «Уровень N» вместо просто номера.
  4. Обновить golden-тесты карточки.
- **Проверка:** карточка отображается корректно во всех состояниях, golden-тесты зелёные.

### Задача 23.3: Экран уровня (`LevelDetailScreen`)
- **Файлы:** `lib/screens/level_detail_screen.dart`, `lib/providers/lesson_progress_provider.dart`
- **Что делать:**
  1. Гарантировать старт с блока 0 (текстовое описание): убедиться, что `initialPage` = 0 и `unlockedPage` по умолчанию 0.
  2. Сдвинуть `FloatingChatBubble` вверх на высоту `BottomNavigationBar` + 16 px, чтобы не перекрывать кнопку «Далее».
  3. Обновить интеграционный тест `level_detail_screen_test.dart`.
- **Проверка:** уровень всегда открывается с описания, кнопки не перекрываются, тесты проходят.

### Задача 23.4: Чат Leo
- **Файлы:** `lib/screens/leo_chat_screen.dart`, `lib/widgets/chat_item.dart`
- **Что делать:**
  1. Переместить кнопку «Новый диалог» в нижнюю часть экрана посередине (FloatingActionButton).
  2. Добавить аватар Leo (`assets/images/avatars/avatar_leo.png`) в заголовок списка диалогов.
  3. Разместить счётчик «X сообщений Leo» справа от аватара.
  4. Обновить тест `leo_integration_test.dart`.
- **Проверка:** UI совпадает с макетом Chat_Leo.png, тесты зелёные.

### Задача 23.5: Desktop NavigationRail
- **Файл:** `lib/widgets/desktop_nav_bar.dart`
- **Что делать:**
  1. Отображать подписи («Карта уровней», «Чат», «Профиль») справа от иконок.
  2. Использовать Material-иконки `map`, `chat_bubble`, `person`.
  3. Убедиться, что mobile-версия (`BottomNavigationBar`) остаётся без изменений.
- **Проверка:** на ширине >1024 px подписи сбоку, на mobile всё работает как прежде.

### Задача 23.6: Тесты и CI
- Обновить/добавить widget- и golden-тесты для всех изменённых компонентов.
- Запустить `flutter analyze` и убедиться, что нет новых warning.
- Поддержать успешное прохождение CI-workflow.

---

### Задача 23.7: Профиль — визуальное выравнивание
- **Файлы:** `lib/screens/profile_screen.dart`, `lib/widgets/stat_card.dart`
- **Что делать:**
  1. Переместить аватар и имя пользователя в одну строку с бейджем «Premium/Free».  
  2. Выровнять статистику (уровни, сообщения, артефакты) в 3-колоночный `Wrap` с равными отступами.  
  3. Добавить кнопку «Изменить фото» (иконка камеры) поверх аватара.
- **Проверка:** layout совпадает с макетом Profile.png, аватар обновляется без перезагрузки.

### Задача 23.8: Hover-эффект LevelCard только на Web
- **Файл:** `lib/widgets/level_card.dart`
- **Что делать:** отключить `MouseRegion` и `AnimatedScale`, если ширина экрана <600 px (тач-устройства), чтобы избежать ненужных rebuild.
- **Проверка:** на mobile анимация отсутствует, на Web остаётся.

### Задача 23.9: Адаптивность форм входа/регистрации
- **Файлы:** `lib/screens/auth/login_screen.dart`, `lib/screens/auth/register_screen.dart`
- **Что делать:** при ширине 600–1024 px (tablet) ограничить ширину карточки формы 480 px и центрировать по горизонтали.  
- **Проверка:** форма не растягивается на планшете, mobile/web не изменились.

### Задача 23.10: Чистка warning `flutter analyze`
- Удалить/поправить `unused_import`, `unused_*`, `dead_*`, `override_on_non_overriding_member` и `invalid_annotation_target`.  
- Добавить недостающие пакеты в `dev_dependencies` для тестов (`path`, `video_player_platform_interface`).
- **Проверка:** `flutter analyze` ≤ 20 info-level сообщений, 0 warning.
